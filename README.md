# Проектная работа "Веб-ларек"

https://github.com/piierro/web-larek-frontend.git

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

* src/ — исходные файлы проекта
* src/components/ — папка с JS компонентами
* src/components/base/ — папка с базовым кодом

Важные файлы:

* src/pages/index.html — HTML-файл главной страницы
* src/types/index.ts — файл с типами
* src/index.ts — точка входа приложения
* src/scss/styles.scss— корневой файл стилей
* src/utils/constants.ts — файл с константами
* src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

## Сборка

```
npm run build
```

## Описание типов данных

* ```IProductItem``` - интерфейс описывающий структуру данных продукта, включает в себя: id, описание, URL изображения, название, категорию и стоимость товара.
* ```IAppState ```-  интерфейс для типов общего стостояния приложения(содержит состояние корзины, каталога товаров и заказа.).
* ```IOrderForm``` -  интерфейс для указания атрибутов формы заказа, включает в себя данные: адреса доставки, способа оплаты, электронную почту и номер телефона.
* ```IOrder``` - типизирует объект, который представляет собой заказ и содержит следующие данные:
    1. `items` - массив строк, представляющий товары в заказе.
    2. `total` - число, обозначающее общую стоимость заказа.
* ```IOrderResult``` - интерфейс для результата оформления заказа.

## Базовый код

1. Класс ```EventEmitter``` обеспечивает работу событий. 
   * установка и снятие слушателей событий;
   * вызов слушателей при возникновении события;

2. Класс ```Api``` используется для взаимодействия с внешними системами.
   * возможность отправлять GET и POST-запросы;

3. Класс ```Component``` является базовым классом для компонентов представления.

4. Класс ```Model``` базовый класс для создания классов моделей данных.

## Компоненты модели данных

 ```AppData``` реализует работу с моделью приложения.

 **Класс `AppState`**:
   - Хранит глобальное состояние приложения, включая информацию о корзине, каталоге продуктов, заказе и ошибках формы.
   - Расширяет общий класс `Model<IAppState>`, что позволяет добавить свойство для хранения экземпляра класса брокера событий и добавляет один метод для регистрации события.
   - Содержит методы для работы с данными, такие как расчет общей суммы корзины, установка каталога продуктов, добавление/удаление продуктов в корзину, очистка корзины, а также валидация контактной информации и заказа.


## Представление

### Класс `Page`

- Класс `Page` является наследником класса `Component<IPage>`.
- Поля класса:
  - `_counter`: элемент счетчика корзины.
  - `_catalog`: элемент каталога.
  - `_wrapper`: обертка страницы.
  - `_basket`: элемент корзины.

- Свойства oбъекта:
  - `counter`: устанавливает значение счетчика в корзине, обновляя текст элемента.
  - `catalog`: добавляет карточки на страницу, заменяя текущие элементы.

  Метод `locked`: блокирует/разблокирует прокрутку страницы путем добавления/удаления класса.

Этот класс представляет пример простой архитектуры компонента страницы (Page) с базовым функционалом управления элементами на странице.


### Класс `Card`

- Класс `Card` является наследником класса `Component<ICard>`.
- Поля класса:
  - `_title`: элемент заголовка карточки.
  - `_image`: элемент изображения.
  - `_description`: элемент описания.
  - `_button`: элемент кнопки.
  - `_category`: элемент категории карточки.
  - `_price`: элемент цены.
  
- Свойства объекта:
  - `id`: устанавливает значение идентификатора для данных карточки.
  - `title`: устанавливает или возвращает текст заголовка карточки.
  - `image`: устанавливает изображение для карточки.
  - `description`: устанавливает текст описания карточки.
  - `category`: устанавливает текст категории и добавляет соответствующий класс категории.
  - `price`: устанавливает текст цены карточки (или текст 'Бесценно' для null значения).

Этот класс представляет пример компонента карточки (Card) с возможностью управления текстом, изображением, описанием, категорией и ценой карточки.

### Класс `Modal`

- Класс `Modal` является наследником класса `Component<IModalData>`.
- Поля класса:
  - `_closeButton`: кнопка закрытия модального окна.
  - `_content`: содержимое модального окна.
  
- Добавляются слушатели событий 'click' на кнопку закрытия, на сам контейнер модального окна для закрытия и на содержимое модального окна для предотвращения закрытия.
  
- Свойства класса:
  - `content`: устанавливает содержимое модального окна, заменяя текущее содержимое.
  
- Методы класса:
  - `open()`: открывает модальное окно.
  - `close()`: закрывает модальное окно.
  - `render(data: IModalData)`: рендерит модальное окно с заданными данными, открывая его сразу после рендеринга.

Этот класс предоставляет управление модальным окном (Modal) с возможностью открытия, закрытия и установки контента.


 ### Класс `Form`

- Класс `Form<T>` представляет форму и управление ее состоянием.
- Класс наследуется от `Component<IFormState>`.
- Поля класса:
  - `_submit`: кнопка отправки формы.
  - `_errors`: элемент для отображения ошибок формы.

- Добавляются слушатели событий 'input' для отслеживания изменений в форме и 'submit' для предотвращения отправки формы.
  
- Методы класса:
  - `onInputChange(field: keyof T, value: string)`: обрабатывает событие изменения в поле формы и генерирует событие изменения для конкретного поля.
  
- Свойства класса:
  - `valid`: устанавливает доступность кнопки отправки формы в зависимости от валидности формы.
  - `errors`: устанавливает текст ошибок формы для отображения.
  
- Метод `render(state: Partial<T> & IFormState)`: рендерит состояние формы, переданное в параметре `state`, обновляя валидность, ошибки и другие входные данные.

Этот класс представляет пример компонента формы (Form) с возможностью управления состоянием и взаимодействия событиями. 


### Класс `Success`

- Класс `Success` представляет компонент для отображения успешного завершения действия.
- Класс является наследником `Component<ISuccess>`.
- Поля класса:
  - `_close`: элемент для закрытия сообщения об успешном завершении.
  - `_total`: 

Этот класс представляет компонент успешного завершения (Success) с функционалом отображения общего количества и возможностью выполнения дополнительных действий при клике на элемент закрытия.


### Класс `Basket`

- Класс `Basket` представляет компонент корзины товаров.
- Класс является наследником `Component<IBasketView>`.
- Поля класса:
  - `_list`: элемент списка товаров в корзине.
  - `_total`: элемент для отображения общей суммы товаров в корзине.
  - `_button`: элемент кнопки для открытия оформления заказа.
  
- Свойства класса:
  - `items` (массив `HTMLElement`): устанавливает список элементов товаров в корзине, обновляя содержимое в `_list`.
  - `selected`: устанавливает выбранные элементы в корзине и управляет доступностью кнопки.
  - `total`: устанавливает и отображает общую сумму товаров в корзине в элементе.

Этот класс представляет компонент корзины (Basket) с возможностью управления товарами, отображения общей суммы и обработки выбранных элементов.


### Класс `Contacts`

- Класс `Contacts` расширяет класс `Form<IOrderForm>` и представляет компонент контактной информации.
- Свойства класса:
  - `phone`: устанавливает значение номера телефона.
  - `email`: устанавливает значение электронной почты.

### Класс `Order`

- Класс `Order` также расширяет класс `Form<IOrderForm>` и представляет компонент для оформления заказа.
- Поля класса:
  - `_buttons`: массив кнопок в форме выбора способа оплаты.
- Для каждой кнопки добавляется слушатель события 'click', который устанавливает способ оплаты и эмитирует событие изменения способа оплаты.
- Свойства класса:
  - `payment`: устанавливает выбранный способ оплаты и применяет соответствующий стиль к кнопке.
  - `address`: устанавливает значение адреса.

Эти классы представляют компоненты для ввода контактной информации (Contacts) и оформления заказа (Order) с возможностью управления полями формы и выбора способа оплаты.


### Интерфейс IProductAPI

- Интерфейс IProductAPI определяет методы для взаимодействия с API относительно продуктов.
- Методы:
  - getCardList: получение списка продуктов в виде массива товаров.
  - orderCards: оформление заказа с передачей информации о заказе и получение результата заказа.

### Класс ProductAPI

- Класс ProductAPI реализует интерфейс IProductAPI и предоставляет методы для работы с продуктами через API, наследуя функционал от базового класса Api.
- Методы класса:
  - getCardList(): выполняет GET-запрос на сервер для получения списка продуктов и обработки данных.
  - orderCards(order: IOrder): выполняет POST-запрос на сервер для оформления заказа и получения результата.

Этот класс представляет API для взаимодействия с продуктами, включая получение списка продуктов и заказ товаров.

